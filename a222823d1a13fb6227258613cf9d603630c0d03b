{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "deddaf72_8b1c6d11",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 19
      },
      "writtenOn": "2022-11-21T12:37:26Z",
      "side": 1,
      "message": "It works now (at least with the sample ldap DB) with slightly modified command:\n\nsuper_client_info:\n\n  {\"client_id\":\"my-example-client\",\"client_secret\":\"abcde12345-s3cr3t\"}\n  \nkalamar.production.conf:\n\nuse Mojo::File qw\u0027path\u0027;\nuse Mojo::JSON \u0027decode_json\u0027;\nmy $client \u003d decode_json(path(\u0027/kalamar/super_client_info\u0027)-\u003eslurp);\n\n  {\n    Kalamar \u003d\u003e {\n      api_path \u003d\u003e \u0027http://localhost:8089/api/\u0027,\n      plugins \u003d\u003e [\u0027Auth\u0027]\n    },\n    \u0027Kalamar-Auth\u0027 \u003d\u003e {\n      client_id \u003d\u003e $client-\u003e{client_id},\n      client_secret \u003d\u003e $client-\u003e{client_secret},\n      oauth2 \u003d\u003e 1\n    }\n  }\n\nRunninng kustvakt-full:\n\n  docker run --rm --name kustvakt --net host -v \"${PWD}/sample-index:/kustvakt/index:z\" --mount type\u003dbind,readonly\u003dtrue,source\u003d\"${PWD}/super_client_info\",target\u003d/kustvakt/client/super_client_info korap/kustvakt:0.69-full\n  \nRunning Kalamar:\n\n  docker run --rm --name kalamar --net host --mount type\u003dbind,readonly\u003dtrue,source\u003d\"${PWD}/kalamar.production.conf\",target\u003d/kalamar/kalamar.production.conf --mount type\u003dbind,readonly\u003dtrue,source\u003d\"${PWD}/super_client_info\",target\u003d/kalamar/super_client_info korap/kalamar\n  \nLogin with e.g. \"user1:password1\" now is fine!",
      "revId": "a222823d1a13fb6227258613cf9d603630c0d03b",
      "serverId": "626241b7-b7d0-4197-b843-1ee23887649c"
    }
  ]
}